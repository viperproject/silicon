field f: Int


method maybeAlias(a: Ref, b: Ref, c: Bool, n: Int)
    requires @dependency()(acc(a.f, 1/2))
    requires @dependency()(acc(b.f, 1/2))
    requires @dependency()(c ==> a == b)
    requires a.f > 0 && n > 0 && b.f >= 0
    requires a.f < 100
    requires !c ==> a.f < b.f
{
    if(@dependency()(c)){
        @testAssertion()
        a.f := n + 1
    }
}

method aliasing1(x: Ref, n: Int)
  requires @dependency()(acc(x.f))
  requires @irrelevant()(n > 0)
  requires @irrelevant()(x.f > n)
{
  @dependency()
  x.f := n + 1

  var y: Ref
  @dependency()
  y := x

  @testAssertion()
  assert y.f > n
}


method aliasing2(x: Ref, y: Ref, n: Int)
  requires @dependency()(acc(x.f, 1/2))
  requires @dependency()(acc(y.f, 1/2))
  requires @irrelevant()(n > 0)
  requires @irrelevant()(x.f > n)
{
  if(@dependency()(x == y)){
    @testAssertion()
    x.f := n + 1
  }
}

