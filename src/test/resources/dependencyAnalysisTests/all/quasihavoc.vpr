field f: Int

method quasihavoc1(x: Ref, y: Ref)
    requires @dependency("Precondition")(acc(x.f))
    requires @dependency("Precondition")(x.f == 3)
    requires @dependency("Precondition")(x != y)
{
    @irrelevant()
    quasihavoc y.f   // does nothing. we have no permission
    @testAssertion("Explicit")
    assert x.f == 3
}

method quasihavoc2(x: Ref, y: Ref)
    requires @dependency("Precondition")(acc(x.f))
    requires @irrelevant("Precondition")(acc(y.f))
    requires @dependency("Precondition")(x.f == 42)
{
    @irrelevant()
    quasihavoc y.f
    @testAssertion("Explicit")
    assert x.f == 42
}

method quasihavoc3(x: Ref)
    requires @dependency("Precondition")(acc(x.f))
    requires @irrelevant("Precondition")(x.f == 0)
{
    @irrelevant()
    quasihavoc x.f
    @dependency("Implicit")
    x.f := 3
    @testAssertion("Explicit")
    assert x.f == 3
}

