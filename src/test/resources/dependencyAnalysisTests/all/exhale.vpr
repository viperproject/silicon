field f: Int


method exhaleDependency(x: Ref)
    requires @dependency("Explicit")(acc(x.f))
{
    @dependency("Implicit")
    exhale acc(x.f, 1/2)
    @dependency("Explicit")
    inhale acc(x.f, 1/2)
    @testAssertion("Implicit")
    x.f := 0
}

method exhaleIrrelevant(x: Ref)
    requires acc(x.f, 1/2) // TODO ake: imprecise? @irrelevant("Explicit")(acc(x.f, 1/2))
{
    // @irrelevant("Implicit") // TODO ake: imprecise?
    exhale acc(x.f, 1/4)
    @dependency("Explicit")
    inhale acc(x.f, 1/2)
    @testAssertion("Implicit")
    inhale x.f > 0
}

method exhale2(){
    var x: Ref
    @dependency("Explicit")
    inhale acc(x.f)
    @dependency("Explicit")
    inhale x.f > 0
    @dependency("Implicit")
    x.f := x.f + 1
    // @irrelevant("Implicit") // TODO ake
    exhale acc(x.f, 1/2)
    @testAssertion("Explicit")
    assert x.f > 1
}