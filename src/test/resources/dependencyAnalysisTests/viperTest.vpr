field f: Int

method foo(a: Int, x: Ref) returns (res: Int)
    ensures res >= 0
{
    if(a < 0){
        res := x.f
    }else{
        res := a
    }
}

method aTest()
    ensures false
{
    assert false
}

method bar()
{
    var a: Int
    assert a > 0

    assert a >= 0

    a := 0

    assert a == 0
}

method permTest(x: Ref)
    requires acc(x.f)
{
    x.f := 0
}

predicate p(a: Int, x: Ref){
    acc(x.f, 1/2) && a == x.f
}

method pTest(x: Ref, a: Int)
    requires p(a, x)
    requires a == 0
{
    unfold p(a, x)

    assert a == x.f

    assert a > 0

    var i: Int
    i := 0
    assert i == 0
}

method unreachTest(a: Int, x: Ref)
    requires a > 0
{
    if(a < 0){
        x.f := a
        assert false
    }
}