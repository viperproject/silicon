//import "examples-16.0.vpr"

field checksumData: Int

adt Option[T] {
    Some(value: T)
    None()
}

field ocs: Option[Int]

predicate ChecksumMachineOCS(this: Ref) 
{
    acc(this.checksumData) && 0 <= this.checksumData &&
    acc(this.ocs)
}



method AppendOCS(this: Ref, d: Int)
    //requires ChecksumMachineOCS(this)
    //requires 0 <= d
    //ensures ChecksumMachineOCS(this)
    //ensures unfolding ChecksumMachineOCS(this) in this.checksumData == old(unfolding ChecksumMachineOCS(this) in this.checksumData) + d
    //ensures unfolding ChecksumMachineOCS(this) in this.ocs.isNone
{
    //unfold ChecksumMachineOCS(this)
    this.checksumData := this.checksumData + d
    this.ocs := None()
    //fold ChecksumMachineOCS(this)
}