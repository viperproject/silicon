import "./tree.vpr"


method insert(r: Ref)
requires acc(r.val)
requires acc(r.left)
requires acc(r.right)
requires tree(r.left)
requires tree(r.right)
{
    var prev: Ref := new(left, right, val)
    var curr: Ref := new(val)
    prev.left := curr
    prev.right := r

    //fold tree(prev.left.left)
    //fold tree(prev.left.right)
    //fold tree(prev.right)

    package tree(curr) --* tree(prev){
        fold tree(r)
        fold tree(prev)
    }
}