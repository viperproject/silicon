import "./tree.vpr"


method extract_max(root: Ref) returns (rest: Ref, max: Ref)
requires tree(root) && root != null
ensures tree(rest)
ensures tree(max) && max != null


method merge(leftT: Ref, rightT: Ref) returns (res: Ref)
//requires tree(leftT) && tree(rightT)
//ensures tree(res)
{
    var root: Ref
    if(leftT == null){
        res := rightT
    } else {
        if(rightT == null){
            res := leftT
        } else {
            var left_new: Ref
            left_new, root := extract_max(leftT)
            //unfold tree(root)
            root.left := left_new
            root.right := rightT
            //fold tree(root)
            res := root
        }
    }
}